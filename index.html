<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä»Šæ—¥ç¦»èŒæŒ‡æ•°è®¡ç®—å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700;900&display=swap');

        * {
            font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-attachment: fixed;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* åŠ¨æ€èƒŒæ™¯è£…é¥° */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: float 20s linear infinite;
            pointer-events: none;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-50px, -50px) rotate(360deg); }
        }

        /* æ¯›ç»ç’ƒå¡ç‰‡ */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow:
                0 8px 32px rgba(31, 38, 135, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }

        /* è‡ªå®šä¹‰æ»‘å—æ ·å¼ */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 10px;
            border-radius: 10px;
            background: linear-gradient(90deg, #e0e5ec 0%, #f0f0f0 100%);
            box-shadow:
                inset 0 2px 4px rgba(0,0,0,0.06),
                inset 0 -2px 4px rgba(255,255,255,0.8);
            outline: none;
            position: relative;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            box-shadow:
                0 4px 12px rgba(102, 126, 234, 0.4),
                0 2px 4px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.3);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border: 3px solid #fff;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.15);
            box-shadow:
                0 6px 16px rgba(102, 126, 234, 0.5),
                0 3px 6px rgba(0,0,0,0.15),
                inset 0 1px 0 rgba(255,255,255,0.3);
        }

        input[type="range"]::-webkit-slider-thumb:active {
            transform: scale(1.05);
        }

        input[type="range"]::-moz-range-thumb {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            border: 3px solid #fff;
            box-shadow:
                0 4px 12px rgba(102, 126, 234, 0.4),
                0 2px 4px rgba(0,0,0,0.1);
        }

        /* ä¸»æŒ‰é’® */
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 200% 200%;
            animation: gradient-shift 3s ease infinite;
            box-shadow:
                0 10px 30px rgba(102, 126, 234, 0.4),
                0 5px 15px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.2);
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow:
                0 15px 40px rgba(102, 126, 234, 0.5),
                0 8px 20px rgba(0,0,0,0.15),
                inset 0 1px 0 rgba(255,255,255,0.2);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        /* ç»“æœå¡ç‰‡ */
        .result-card {
            background: linear-gradient(145deg, #ffffff 0%, #fefefe 100%);
            position: relative;
            box-shadow:
                0 20px 60px rgba(31, 38, 135, 0.2),
                0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.5);
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        }

        .result-card::after {
            content: '';
            position: absolute;
            bottom: -100px;
            right: -100px;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            border-radius: 50%;
        }

        /* ç­‰çº§å¾½ç«  */
        .level-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .level-danger {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        .level-warning {
            background: linear-gradient(135deg, #ffa502, #ff7f50);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 165, 2, 0.4);
        }

        .level-normal {
            background: linear-gradient(135deg, #ffa502, #ffcd3c);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 165, 2, 0.3);
        }

        .level-good {
            background: linear-gradient(135deg, #7bed9f, #2ed573);
            color: white;
            box-shadow: 0 6px 20px rgba(46, 213, 115, 0.4);
        }

        /* æ ‡ç­¾æ ·å¼ */
        .tag {
            display: inline-block;
            padding: 6px 14px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 20px;
            font-size: 12px;
            color: #666;
            margin: 4px;
            box-shadow:
                0 2px 8px rgba(0,0,0,0.05),
                inset 0 1px 0 rgba(255,255,255,0.8);
            border: 1px solid rgba(0,0,0,0.05);
            font-weight: 500;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            height: 12px;
            background: linear-gradient(90deg, #f0f0f0 0%, #e0e0e0 100%);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 12px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
        }

        /* æ•°æ®å±•ç¤ºå¡ç‰‡ */
        .data-card {
            background: linear-gradient(145deg, #ffffff 0%, #fafafa 100%);
            border-radius: 16px;
            padding: 14px;
            border: 1px solid rgba(0,0,0,0.05);
            box-shadow:
                0 4px 12px rgba(0,0,0,0.04),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transition: all 0.3s ease;
        }

        .data-card:hover {
            transform: translateY(-2px);
            box-shadow:
                0 6px 16px rgba(0,0,0,0.08),
                inset 0 1px 0 rgba(255,255,255,0.8);
        }

        /* æ¯’é¸¡æ±¤å¡ç‰‡ */
        .quote-card {
            background: linear-gradient(135deg, #fff5f7 0%, #fff 100%);
            border-left: 5px solid #ff6b6b;
            position: relative;
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.1);
        }

        .quote-card::before {
            content: '"';
            position: absolute;
            top: -8px;
            left: 12px;
            font-size: 48px;
            color: #ff6b6b;
            opacity: 0.25;
            font-family: Georgia, serif;
            line-height: 1;
        }

        /* ç¦»èŒæŒ‡æ•°å¤§æ•°å­— */
        .index-number {
            font-size: 72px;
            font-weight: 900;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            text-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
            filter: drop-shadow(0 2px 4px rgba(102, 126, 234, 0.1));
        }

        /* è£…é¥°å›¾æ ‡ */
        .decoration-icon {
            position: absolute;
            opacity: 0.08;
            font-size: 100px;
            pointer-events: none;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .pulse-animation {
            animation: pulse 2.5s ease-in-out infinite;
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }

        /* æ ‡é¢˜è£…é¥° */
        .title-badge {
            background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        /* è¾“å…¥é¡¹å®¹å™¨ */
        .input-item {
            background: linear-gradient(145deg, #fafafa 0%, #ffffff 100%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid rgba(0,0,0,0.05);
            box-shadow:
                0 4px 12px rgba(0,0,0,0.03),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transition: all 0.3s ease;
        }

        .input-item:hover {
            box-shadow:
                0 6px 16px rgba(0,0,0,0.06),
                inset 0 1px 0 rgba(255,255,255,0.8);
            border-color: rgba(102, 126, 234, 0.1);
        }

        /* æ•°å€¼æ˜¾ç¤º */
        .value-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 900;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- ä¸»å®¹å™¨ -->
    <div id="app" class="max-w-md mx-auto px-4 py-6 min-h-screen flex flex-col relative z-10">
        <!-- ç¬¬ä¸€å±ï¼šè¾“å…¥åŒº -->
        <div id="inputScreen" class="flex-1 flex flex-col">
            <!-- æ ‡é¢˜åŒºåŸŸ -->
            <div class="text-center mb-6 fade-in">
                <div class="title-badge inline-block px-6 py-3 rounded-2xl mb-4">
                    <div class="text-4xl mb-2">ğŸ’Š</div>
                    <h1 class="text-2xl font-black text-white mb-1" style="text-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                        ä»Šå¤©ï¼Œæƒ³ç¦»èŒäº†å—ï¼Ÿ
                    </h1>
                    <p class="text-white text-sm opacity-90">æ‰“å·¥ç²¾ç¥çŠ¶æ€å¿«é€Ÿæ£€æµ‹</p>
                </div>
            </div>

            <!-- è¾“å…¥å¡ç‰‡ -->
            <div class="glass-card rounded-3xl p-5 mb-5 fade-in" style="animation-delay: 0.1s;">
                <!-- åŠ ç­æ—¶é•¿ -->
                <div class="input-item">
                    <div class="flex justify-between items-center mb-4">
                        <label class="flex items-center gap-2 text-gray-800 font-bold">
                            <span class="text-2xl">ğŸŒ™</span>
                            <span>ä»Šæ—¥åŠ ç­æ—¶é•¿</span>
                        </label>
                        <div class="value-display text-3xl">
                            <span id="overtimeValue">1</span>h
                        </div>
                    </div>
                    <input type="range" id="overtime" min="0" max="8" value="1" class="w-full">
                    <div class="flex justify-between text-xs text-gray-400 mt-2 font-medium">
                        <span>0h</span>
                        <span>8h+</span>
                    </div>
                </div>

                <!-- è¢«åˆ›æ¬¡æ•° -->
                <div class="input-item">
                    <div class="flex justify-between items-center mb-4">
                        <label class="flex items-center gap-2 text-gray-800 font-bold">
                            <span class="text-2xl">ğŸ˜¤</span>
                            <span>è¢«è€æ¿/å®¢æˆ·åˆ›æ¬¡æ•°</span>
                        </label>
                        <div class="value-display text-3xl">
                            <span id="criticismValue">1</span>æ¬¡
                        </div>
                    </div>
                    <input type="range" id="criticism" min="0" max="10" value="1" class="w-full">
                    <div class="flex justify-between text-xs text-gray-400 mt-2 font-medium">
                        <span>0æ¬¡</span>
                        <span>10æ¬¡+</span>
                    </div>
                </div>

                <!-- éœ€æ±‚å˜æ›´æ¬¡æ•° -->
                <div class="input-item">
                    <div class="flex justify-between items-center mb-4">
                        <label class="flex items-center gap-2 text-gray-800 font-bold">
                            <span class="text-2xl">ğŸ”„</span>
                            <span>ä»Šæ—¥éœ€æ±‚å˜æ›´æ¬¡æ•°</span>
                        </label>
                        <div class="value-display text-3xl">
                            <span id="requirementValue">1</span>æ¬¡
                        </div>
                    </div>
                    <input type="range" id="requirement" min="0" max="10" value="1" class="w-full">
                    <div class="flex justify-between text-xs text-gray-400 mt-2 font-medium">
                        <span>0æ¬¡</span>
                        <span>10æ¬¡+</span>
                    </div>
                </div>

                <!-- ç»­å‘½å‰‚é‡ -->
                <div class="input-item" style="margin-bottom: 0;">
                    <div class="flex justify-between items-center mb-4">
                        <label class="flex items-center gap-2 text-gray-800 font-bold">
                            <span class="text-2xl">â˜•</span>
                            <span>å’–å•¡/å¥¶èŒ¶ç»­å‘½å‰‚é‡</span>
                        </label>
                        <div class="value-display text-3xl">
                            <span id="coffeeValue">1</span>æ¯
                        </div>
                    </div>
                    <input type="range" id="coffee" min="0" max="5" value="1" class="w-full">
                    <div class="flex justify-between text-xs text-gray-400 mt-2 font-medium">
                        <span>0æ¯</span>
                        <span>5æ¯+</span>
                    </div>
                </div>
            </div>

            <!-- ç”ŸæˆæŒ‰é’® -->
            <button id="calculateBtn" class="btn-primary text-white font-black text-lg py-5 rounded-2xl transition-all duration-300 pulse-animation fade-in" style="animation-delay: 0.2s;">
                ç”Ÿæˆæˆ‘çš„é‰´å®šæŠ¥å‘Š ğŸ”®
            </button>
        </div>

        <!-- ç¬¬äºŒå±ï¼šç»“æœåŒºï¼ˆåˆå§‹éšè—ï¼‰ -->
        <div id="resultScreen" class="hidden flex-1 flex flex-col">
            <!-- ç»“æœå¡ç‰‡ -->
            <div id="receiptArea" class="result-card rounded-3xl p-5 mb-5 fade-in relative">
                <!-- è£…é¥°å›¾æ ‡ -->
                <div class="decoration-icon" style="top: 10px; right: 10px;">ğŸ’Š</div>
                <div class="decoration-icon" style="bottom: 20px; left: 5px;">ğŸ’Š</div>

                <!-- é¡¶éƒ¨æ ‡é¢˜åŒº -->
                <div class="text-center mb-4 relative">
                    <div class="text-3xl mb-2">ğŸ¥</div>
                    <h2 class="text-lg font-black text-gray-800">æ‰“å·¥ç²¾ç¥çŠ¶æ€é‰´å®šæŠ¥å‘Š</h2>
                    <p class="text-xs text-gray-400 mt-1" id="diagnosisDate"></p>
                    <div class="mt-2" id="levelBadge"></div>
                </div>

                <!-- æ ¸å¿ƒæŒ‡æ•°å±•ç¤º -->
                <div class="text-center my-5 relative">
                    <div class="text-xs text-gray-500 mb-2 tracking-wider font-bold">ä»Šæ—¥ç¦»èŒå†²åŠ¨æŒ‡æ•°</div>
                    <div class="index-number" id="resignationIndex">0%</div>
                    <div class="mt-3">
                        <div class="progress-bar w-48 mx-auto">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="text-sm font-bold mt-3 text-gray-700" id="indexLevel"></div>
                </div>

                <!-- ç—‡çŠ¶æ ‡ç­¾ -->
                <div class="mb-4">
                    <div class="text-xs text-gray-500 mb-2 font-bold">ğŸ“Š ä»Šæ—¥ç—‡çŠ¶æ ‡ç­¾</div>
                    <div class="flex flex-wrap justify-center" id="symptomTags">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- æ•°æ®å¡ç‰‡ -->
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="data-card text-center">
                        <div class="text-2xl mb-1">ğŸ˜¤</div>
                        <div class="text-xs text-gray-500 font-bold">è¢«åˆ›æ¬¡æ•°</div>
                        <div class="text-xl font-black text-gray-800" id="criticismDisplay">0</div>
                    </div>
                    <div class="data-card text-center">
                        <div class="text-2xl mb-1">â˜•</div>
                        <div class="text-xs text-gray-500 font-bold">ç»­å‘½å‰‚é‡</div>
                        <div class="text-xl font-black text-gray-800" id="coffeeDisplay">0</div>
                    </div>
                    <div class="data-card text-center">
                        <div class="text-2xl mb-1">ğŸŒ™</div>
                        <div class="text-xs text-gray-500 font-bold">åŠ ç­æ—¶é•¿</div>
                        <div class="text-xl font-black text-gray-800" id="overtimeDisplay">0h</div>
                    </div>
                    <div class="data-card text-center">
                        <div class="text-2xl mb-1">ğŸ”„</div>
                        <div class="text-xs text-gray-500 font-bold">éœ€æ±‚å˜æ›´</div>
                        <div class="text-xl font-black text-gray-800" id="requirementDisplay">0</div>
                    </div>
                </div>

                <!-- æ¯’é¸¡æ±¤å¡ç‰‡ -->
                <div class="quote-card rounded-2xl p-4 mb-4">
                    <div class="text-xs text-gray-500 mb-2 flex items-center gap-1 font-bold">
                        <span>ğŸ’Š</span>
                        <span>AI åŒ»å¸ˆå¤„æ–¹</span>
                    </div>
                    <div class="text-sm font-bold text-gray-800 leading-relaxed relative z-10" id="toxicQuote"></div>
                </div>

                <!-- åº•éƒ¨ä¿¡æ¯ -->
                <div class="text-center pt-3 border-t border-gray-100">
                    <div class="text-xs text-gray-400 font-bold">
                        é‰´å®šæœºæ„ï¼šç¦»èŒè‡ªæ•‘ä¸­å¿ƒ Â· AIç²¾ç¥ç§‘
                    </div>
                    <div class="text-xs text-gray-300 mt-1">
                        æœ¬æŠ¥å‘Šä»…ä¾›å‚è€ƒï¼Œå»ºè®®è¯¥æ¶¦å°±æ¶¦
                    </div>
                </div>
            </div>

            <!-- æŒ‰é’®ç»„ -->
            <div class="space-y-3">
                <button id="saveBtn" class="w-full bg-gradient-to-r from-purple-600 to-pink-500 text-white font-bold py-4 rounded-2xl shadow-lg transition-all hover:shadow-xl active:scale-95">
                    <span class="text-base">ğŸ“¸ æˆªå›¾å‘æœ‹å‹åœˆ</span>
                </button>
                <button id="retryBtn" class="w-full bg-white text-gray-700 font-bold py-3 rounded-xl shadow-md transition-all hover:shadow-lg active:scale-95">
                    å†æµ‹ä¸€æ¬¡ ğŸ”„
                </button>
            </div>

            <!-- åº•éƒ¨å¹¿å‘Š -->
            <div class="text-center mt-4 px-4">
                <div class="bg-white bg-opacity-20 backdrop-filter backdrop-blur-lg rounded-2xl p-3 border border-white border-opacity-30">
                    <div class="text-xs text-white font-bold">
                        ğŸ’¡ æƒ³è¦ç¦»èŒè°ˆåˆ¤è¯æœ¯ï¼Ÿå…³æ³¨ã€èŒåœºæ‘¸é±¼èŒ¶ã€‘
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ›´çŠ€åˆ©çš„æ¯’é¸¡æ±¤åº“ - 95å00åç½‘æ„Ÿæ–‡æ¡ˆ
        const toxicQuotes = [
            "åˆ«å¿äº†ï¼Œè¿™å°±æ˜¯ä¸ªç­ï¼Œåˆä¸æ˜¯ä½ çš„å‘½",
            "å·¥èµ„æ˜¯ç²¾ç¥æŸå¤±è´¹ï¼Œä¸æ˜¯åŠ³åŠ¨æŠ¥é…¬",
            "ä¸Šç­å°±åƒè¢«PUAï¼Œè¿˜è¦è‡ªæˆ‘æ„ŸåŠ¨ï¼Ÿ",
            "è€æ¿ç”»é¥¼ä½ åƒé¥¼ï¼Œæœ€åæ¶ˆåŒ–ä¸è‰¯çš„æ˜¯ä½ ",
            "ä½ çš„ç¦»èŒæŒ‡æ•°å·²çˆ†è¡¨ï¼Œå»ºè®®ç›´æ¥æ¶¦",
            "åœ°çƒä¸çˆ†ç‚¸ï¼Œä½ å°±å¾—æ‰“å·¥ï¼Ÿè¿™ç­éä¸Šä¸å¯ï¼Ÿ",
            "å·¥ä½œå¯ä»¥æ¢ï¼Œä½†ç²¾ç¥çŠ¶æ€å¾ˆéš¾æ¢å¤",
            "ä¸å…¶åœ¨è¿™å†…è€—ï¼Œä¸å¦‚ç›´æ¥è·‘è·¯",
            "è®°ä½ï¼šå·¥ä½œæ˜¯æš‚æ—¶çš„ï¼Œå‘é™…çº¿åç§»æ˜¯æ°¸ä¹…çš„",
            "è¿™ç ´ç­è°çˆ±ä¸Šè°ä¸Šï¼Œåæ­£æˆ‘ä¸ä¸Šäº†",
            "å»ºè®®ç«‹å³æ‰“å¼€æ‹›è˜è½¯ä»¶ï¼Œè¡ŒåŠ¨åŠ›æ‹‰æ»¡",
            "å†å¿ä¸‹å»ï¼ŒçœŸçš„ä¼šå˜æˆç¤¾ç•œæœ¬ç•œ",
            "è€æ¿çš„å¿«ä¹å»ºç«‹åœ¨ä½ çš„ç—›è‹¦ä¹‹ä¸Šï¼Œæ‡‚ï¼Ÿ",
            "ç¦»èŒä¸æ˜¯é€ƒé¿ï¼Œæ˜¯åŠæ—¶æ­¢æŸ",
            "ä½ é‚£ä¹ˆä¼˜ç§€ï¼Œä¸ºä»€ä¹ˆè¦åœ¨è¿™å—å§”å±ˆï¼Ÿ",
            "ä¸Šç­å°±åƒä¾¿ç§˜ï¼Œè´¹åŠ²åˆä¸èˆ’æœ",
            "æ¯å¤©å«é†’ä½ çš„ä¸æ˜¯æ¢¦æƒ³ï¼Œæ˜¯è¿˜è¦è¿˜çš„èŠ±å‘—",
            "è¿™ç­ä¸Šå¾—ï¼Œæˆ‘éƒ½å¿ƒç–¼æˆ‘è‡ªå·±",
            "ä½ çš„æ‰åé…å¾—ä¸Šæ›´å¥½çš„å¹³å°ï¼Œè€Œä¸æ˜¯è¿™é‡Œ",
            "è¦ä¹ˆå¿ï¼Œè¦ä¹ˆæ»šï¼Œè¦ä¹ˆå¿ç€å¿ç€å°±æ»šäº†"
        ];

        // ç—‡çŠ¶æ ‡ç­¾åº“
        const symptomTags = {
            high: [
                "ç²¾ç¥ç¦»èŒä¸­", "å·²ç¡®è¯Šä¸ºç¤¾ç•œ", "æ€¥éœ€å¥¶èŒ¶ç»­å‘½",
                "æ¯å¤©éƒ½åœ¨æƒ³ç¦»èŒ", "æ‰“å·¥é­‚å·²ç‡ƒå°½", "ç²¾ç¥çŠ¶æ€ç¾ä¸½",
                "ä¸è€æ¿åŠ¿ä¸ä¸¤ç«‹", "åœ¨è¿™ä¸ªç­ä¸€å¤©éƒ½å¾…ä¸ä¸‹å»äº†",
                "åŠ ç­åŠ åˆ°å", "éœ€æ±‚å˜æ›´å—å®³è€…"
            ],
            medium: [
                "é—´æ­‡æ€§æƒ³ç¦»èŒ", "è¿˜èƒ½å†è‹Ÿä¸€è‹Ÿ",
                "å’–å•¡ç»­å‘½ä¸­", "æ‰“å·¥äººæ‰“å·¥é­‚",
                "æ‘¸é±¼ä¸“ä¸šæˆ·", "å¸¦è–ªç—›è‹¦ä¸­",
                "åŠ ç­å¸¸æ€åŒ–", "æ”¹ä¸“ä¸šæˆ·"
            ],
            low: [
                "æ‰“å·¥äººå¿ƒæ€", "è¿˜èƒ½åšæŒ",
                "ä½›ç³»æ‰“å·¥", "å¿«ä¹æ‘¸é±¼",
                "èŒåœºè€æ²¹æ¡", "æƒ…ç»ªç¨³å®š",
                "å·¥ä½œé‡é€‚ä¸­", "å‡†ç‚¹ä¸‹ç­"
            ]
        };

        // ç­‰çº§é…ç½®
        const levelConfig = {
            danger: {
                text: "âš ï¸ å±é™©ï¼ç¦»èŒå€¾å‘æé«˜",
                class: "level-danger",
                tags: symptomTags.high
            },
            warning: {
                text: "ğŸ”¥ é¢„è­¦ï¼æ­£åœ¨ç¦»èŒè¾¹ç¼˜",
                class: "level-warning",
                tags: symptomTags.high
            },
            normal: {
                text: "ğŸ˜ æ™®é€šç¤¾ç•œçŠ¶æ€",
                class: "level-normal",
                tags: symptomTags.medium
            },
            good: {
                text: "âœ¨ æ‰“å·¥çŠ¶æ€ç¨³å®š",
                class: "level-good",
                tags: symptomTags.low
            }
        };

        // è·å–DOMå…ƒç´ 
        const overtimeSlider = document.getElementById('overtime');
        const criticismSlider = document.getElementById('criticism');
        const requirementSlider = document.getElementById('requirement');
        const coffeeSlider = document.getElementById('coffee');

        const overtimeValue = document.getElementById('overtimeValue');
        const criticismValue = document.getElementById('criticismValue');
        const requirementValue = document.getElementById('requirementValue');
        const coffeeValue = document.getElementById('coffeeValue');

        const calculateBtn = document.getElementById('calculateBtn');
        const saveBtn = document.getElementById('saveBtn');
        const retryBtn = document.getElementById('retryBtn');

        const inputScreen = document.getElementById('inputScreen');
        const resultScreen = document.getElementById('resultScreen');
        const receiptArea = document.getElementById('receiptArea');

        // æ›´æ–°æ»‘å—å€¼æ˜¾ç¤º
        function updateSliderValue(slider, display) {
            display.textContent = slider.value;
        }

        overtimeSlider.addEventListener('input', () => updateSliderValue(overtimeSlider, overtimeValue));
        criticismSlider.addEventListener('input', () => updateSliderValue(criticismSlider, criticismValue));
        requirementSlider.addEventListener('input', () => updateSliderValue(requirementSlider, requirementValue));
        coffeeSlider.addEventListener('input', () => updateSliderValue(coffeeSlider, coffeeValue));

        // è®¡ç®—ç¦»èŒæŒ‡æ•°
        function calculateResignationIndex() {
            const overtime = parseInt(overtimeSlider.value);
            const criticism = parseInt(criticismSlider.value);
            const requirement = parseInt(requirementSlider.value);
            const coffee = parseInt(coffeeSlider.value);

            // ç®—æ³•ï¼šåŠ ç­*15 + è¢«åˆ›*20 + éœ€æ±‚å˜æ›´*15 + å’–å•¡*10
            let index = (overtime * 15) + (criticism * 20) + (requirement * 15) + (coffee * 10);

            // ç¡®ä¿ä¸ä½äº0
            index = Math.max(0, index);

            // å¦‚æœè¶…è¿‡100ï¼Œæ˜¾ç¤º999%
            if (index > 100) {
                return 999;
            }

            return Math.round(index);
        }

        // è·å–ç­‰çº§é…ç½®
        function getLevelConfig(index) {
            if (index >= 999 || index >= 80) return levelConfig.danger;
            if (index >= 60) return levelConfig.warning;
            if (index >= 40) return levelConfig.normal;
            return levelConfig.good;
        }

        // éšæœºè·å–æ ‡ç­¾
        function getRandomTags(tagsArray, count = 4) {
            const shuffled = [...tagsArray].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            const index = calculateResignationIndex();
            const config = getLevelConfig(index);

            // è®¾ç½®æ—¥æœŸ
            const now = new Date();
            const dateStr = `${now.getFullYear()}.${String(now.getMonth() + 1).padStart(2, '0')}.${String(now.getDate()).padStart(2, '0')}`;
            document.getElementById('diagnosisDate').textContent = `é‰´å®šæ—¶é—´ï¼š${dateStr}`;

            // è®¾ç½®ç­‰çº§å¾½ç« 
            const levelBadge = document.getElementById('levelBadge');
            levelBadge.innerHTML = `<span class="level-badge ${config.class}">${config.text}</span>`;

            // è®¾ç½®æŒ‡æ•°
            const indexElement = document.getElementById('resignationIndex');
            indexElement.textContent = index + '%';

            // è®¾ç½®è¿›åº¦æ¡
            const progressFill = document.getElementById('progressFill');
            const progressValue = Math.min(index, 100);
            progressFill.style.width = progressValue + '%';

            // è®¾ç½®æŒ‡æ•°æè¿°
            document.getElementById('indexLevel').textContent = config.text;

            // è®¾ç½®ç—‡çŠ¶æ ‡ç­¾
            const tags = getRandomTags(config.tags, 4);
            const tagsContainer = document.getElementById('symptomTags');
            tagsContainer.innerHTML = tags.map(tag => `<span class="tag">#${tag}</span>`).join('');

            // è®¾ç½®æ•°æ®å¡ç‰‡
            document.getElementById('criticismDisplay').textContent = criticismSlider.value + 'æ¬¡';
            document.getElementById('coffeeDisplay').textContent = coffeeSlider.value + 'æ¯';
            document.getElementById('overtimeDisplay').textContent = overtimeSlider.value + 'h';
            document.getElementById('requirementDisplay').textContent = requirementSlider.value + 'æ¬¡';

            // è®¾ç½®éšæœºæ¯’é¸¡æ±¤
            const randomQuote = toxicQuotes[Math.floor(Math.random() * toxicQuotes.length)];
            document.getElementById('toxicQuote').textContent = randomQuote;

            // åˆ‡æ¢å±å¹•
            inputScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            resultScreen.classList.add('fade-in');
        }

        // ä¿å­˜å›¾ç‰‡
        async function saveImage() {
            const originalText = saveBtn.innerHTML;
            saveBtn.innerHTML = '<span class="text-base">â³ ç”Ÿæˆä¸­...</span>';
            saveBtn.disabled = true;

            try {
                const canvas = await html2canvas(receiptArea, {
                    backgroundColor: '#ffffff',
                    scale: 2,
                    logging: false,
                    useCORS: true
                });

                // è½¬æ¢ä¸ºå›¾ç‰‡
                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.download = `æ‰“å·¥ç²¾ç¥çŠ¶æ€é‰´å®š_${new Date().getTime()}.png`;
                    link.href = url;
                    link.click();
                    URL.revokeObjectURL(url);

                    saveBtn.innerHTML = originalText;
                    saveBtn.disabled = false;
                });
            } catch (error) {
                console.error('ä¿å­˜å¤±è´¥:', error);
                alert('ä¿å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥æˆªå›¾ä¿å­˜');
                saveBtn.innerHTML = originalText;
                saveBtn.disabled = false;
            }
        }

        // é‡ç½®
        function reset() {
            resultScreen.classList.add('hidden');
            inputScreen.classList.remove('hidden');
            inputScreen.classList.add('fade-in');

            // é‡ç½®æ»‘å—
            overtimeSlider.value = 1;
            criticismSlider.value = 1;
            requirementSlider.value = 1;
            coffeeSlider.value = 1;

            // æ›´æ–°æ˜¾ç¤º
            overtimeValue.textContent = '1';
            criticismValue.textContent = '1';
            requirementValue.textContent = '1';
            coffeeValue.textContent = '1';
        }

        // äº‹ä»¶ç»‘å®š
        calculateBtn.addEventListener('click', showResult);
        saveBtn.addEventListener('click', saveImage);
        retryBtn.addEventListener('click', reset);
    </script>
</body>
</html>
